#include <behaviors.dtsi>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/keys.h>
#define AS(keycode) &as LS(keycode) keycode     // Autoshift Macro
#define COMBOMS 25
#define HOLDTAP 165 // Old Value 150
#define MACRO_WAIT_TIME 50



/ {
    // Define Macros
    macros {
        // Define Macro 1
        macro_1: macro_1 {
            compatible = "zmk,behavior-macro";
            label = "Macro 1";
            #binding-cells = <0>;  // Indicates no extra parameters are needed
            bindings = <&macro_press &kp H>, <&macro_press &kp E>, <&macro_press &kp L>,
                       <&macro_press &kp L>, <&macro_press &kp O>, <&macro_release>;
        };

        // Define Macro 2
        macro_2: macro_2 {
            compatible = "zmk,behavior-macro";
            label = "Macro 2";
            #binding-cells = <0>;  // Indicates no extra parameters are needed
            bindings = <&macro_press &kp W>, <&macro_press &kp O>, <&macro_press &kp R>,
                       <&macro_press &kp L>, <&macro_press &kp D>, <&macro_release>;
        };

        // Define Macro 3
        macro_3: macro_3 {
            compatible = "zmk,behavior-macro";
            label = "Macro 3";
            #binding-cells = <0>;  // Indicates no extra parameters are needed
            bindings = <&macro_press &kp Z>, <&macro_press &kp M>, <&macro_press &kp K>, <&macro_release>;
        };
    };

    // Define Custom Behaviors
    behaviors {
        // Define Hold-Tap Behavior
        hold_tap_macro: hold_tap_macro {
            compatible = "zmk,behavior-hold-tap";
            label = "Hold Tap Macro";
            #binding-cells = <2>;  // Two bindings: tap and hold actions
            bindings = <&macro_1>, <&macro_2>; // Tap = macro_1, Hold = macro_2
            tapping-term-ms = <200>;           // Tap/hold detection threshold
            quick-tap-ms = <150>;              // Quick tap detection threshold
        };
    };

    // Keymap Configuration
    keymap {
        compatible = "zmk,keymap";

        // Default Layer Configuration
        default_layer {
            bindings = <
                &kp Q            // Regular key for Q
                &hold_tap_macro  // Custom behavior for tap and hold
                &macro_3         // Triggers macro_3
                &kp A
                &kp S
                &kp D
                // Add more key definitions here as needed
            >;
        };
    };
};